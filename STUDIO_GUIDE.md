# LangGraph Studio ä½¿ç”¨æŒ‡å—

## å¯åŠ¨ Studio

### æ–¹æ³• 1ï¼šä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
cd ai-agent-mvp
uv run langgraph dev --port 8123
```

### æ–¹æ³• 2ï¼šæŒ‡å®šä¸åŒç«¯å£
```bash
uv run langgraph dev --port 8080
```

## è®¿é—® Studio

å¯åŠ¨æˆåŠŸåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è®¿é—®ï¼š

- **ğŸ¨ Studio UI**: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:8123
- **ğŸš€ API ç«¯ç‚¹**: http://127.0.0.1:8123
- **ğŸ“š API æ–‡æ¡£**: http://127.0.0.1:8123/docs

## Studio è°ƒè¯•åŠŸèƒ½

### 1. å¯è§†åŒ–å·¥ä½œæµ
- æŸ¥çœ‹å®Œæ•´çš„ 6 èŠ‚ç‚¹å·¥ä½œæµå›¾
- å®æ—¶æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡ŒçŠ¶æ€
- è§‚å¯ŸçŠ¶æ€åœ¨èŠ‚ç‚¹é—´çš„ä¼ é€’

### 2. é€æ­¥è°ƒè¯•
- å¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹è®¾ç½®æ–­ç‚¹
- æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥çŠ¶æ€
- æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºçŠ¶æ€
- è§‚å¯ŸçŠ¶æ€çš„å˜åŒ–è¿‡ç¨‹

### 3. å®æ—¶æ—¥å¿—
- æŸ¥çœ‹ç»“æ„åŒ–æ—¥å¿—è¾“å‡º
- è·Ÿè¸ª trace_id çš„æ‰§è¡Œé“¾è·¯
- ç›‘æ§æ€§èƒ½æŒ‡æ ‡

## æµ‹è¯•è¾“å…¥

åœ¨ Studio ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•æ•°æ®æ¥è°ƒè¯•å·¥ä½œæµï¼š

```json
{
  "feishu_url": "https://feishu.cn/doc/123",
  "user_intent": "generate_crud",
  "trace_id": "studio-test-001"
}
```

## å·¥ä½œæµèŠ‚ç‚¹è¯´æ˜

1. **ingest_input**: è¾“å…¥æ ‡å‡†åŒ–
2. **fetch_feishu_doc**: è·å–æ–‡æ¡£å†…å®¹ï¼ˆmockï¼‰
3. **understand_doc**: ç”Ÿæˆ ISMï¼ˆmockï¼‰
4. **plan_from_ism**: ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
5. **apply_flow_patch**: åˆæˆ DAG JSON
6. **finalize**: æ•´ç†æœ€ç»ˆå“åº”

## è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹çŠ¶æ€å˜åŒ–
åœ¨ Studio ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼š
- æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥çŠ¶æ€
- æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºçŠ¶æ€
- çŠ¶æ€å­—æ®µçš„å…·ä½“å€¼

### ç›‘æ§æ—¥å¿—
ç»“æ„åŒ–æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
```json
{
  "timestamp": "2025-11-01T...",
  "level": "INFO",
  "service": "ai-agent-mvp",
  "trace_id": "studio-test-001",
  "step": "understand_doc",
  "phase": "end",
  "message": "ISMç”Ÿæˆå®Œæˆ",
  "extra": {"entity_count": 1, "action_count": 1}
}
```

### æµ‹è¯•ä¸åŒåœºæ™¯
ä½ å¯ä»¥ä¿®æ”¹è¾“å…¥å‚æ•°æ¥æµ‹è¯•ä¸åŒåœºæ™¯ï¼š
- ä¸åŒçš„ `feishu_url`
- ä¸åŒçš„ `user_intent`
- æ£€æŸ¥é”™è¯¯å¤„ç†

## é…ç½®æ–‡ä»¶

### langgraph.json
```json
{
  "dependencies": ["."],
  "graphs": {
    "agent": "./studio_app.py:create_graph"
  },
  "env": ".env"
}
```

### .env
```env
LANGSMITH_TRACING=true
LANGSMITH_PROJECT=ai-agent-mvp
```

## å¸¸è§é—®é¢˜

### Q: Studio æ— æ³•å¯åŠ¨
A: ç¡®ä¿å·²å®‰è£… `langgraph-cli[inmem]` ä¾èµ–åŒ…

### Q: æ— æ³•è®¿é—® Studio UI
A: æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œå°è¯•ä½¿ç”¨ä¸åŒçš„ç«¯å£

### Q: å·¥ä½œæµæ‰§è¡Œå¤±è´¥
A: æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œæ£€æŸ¥è¾“å…¥å‚æ•°æ ¼å¼æ˜¯å¦æ­£ç¡®

## åœæ­¢ Studio

æŒ‰ `Ctrl+C` åœæ­¢ Studio æœåŠ¡å™¨